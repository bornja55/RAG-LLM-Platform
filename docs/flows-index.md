# üë• User Flows Overview

## üìã Table of Contents

- [Introduction](#introduction)
- [LINE Rich Menu Design](#line-rich-menu-design)
- [Role Summary](#role-summary)
- [Detailed Flow Documents](#detailed-flow-documents)
- [Common Patterns](#common-patterns)
- [Interaction Guidelines](#interaction-guidelines)

---

## üéØ Introduction

‡∏£‡∏∞‡∏ö‡∏ö‡∏°‡∏µ **4 ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å** ‡∏ú‡πà‡∏≤‡∏ô LINE Official Account:

```
1. üë®‚Äçüè´ Teacher    - ‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô (8 ‡∏Ñ‡∏ô)
2. üë®‚Äçüë©‚Äçüëß Parent     - ‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á (120+ ‡∏Ñ‡∏ô)
3. üë∂ Student    - ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (156+ ‡∏Ñ‡∏ô)
4. üè¢ Admin      - ‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£ (2-3 ‡∏Ñ‡∏ô)
```

**Total Users:** 286+ active users

---

## üì± LINE Rich Menu Design

### Design Specifications

```
Dimensions: 2500 x 1686 px
Format: PNG or JPEG
Max Size: 1 MB
Layout: 6 buttons (2x3 grid)
```

### Color Palette

```
Teacher Colors:
‚îú‚îÄ‚îÄ Primary: Blue #4A90E2
‚îú‚îÄ‚îÄ Secondary: Green #7ED321
‚îú‚îÄ‚îÄ Accent: Orange #F5A623
‚îî‚îÄ‚îÄ Neutral: Gray #4A4A4A

Parent Colors:
‚îú‚îÄ‚îÄ Primary: Pink #FF6B9D
‚îú‚îÄ‚îÄ Secondary: Gold #F8E71C
‚îú‚îÄ‚îÄ Accent: Blue #4A90E2
‚îî‚îÄ‚îÄ Neutral: Gray #4A4A4A

Student Colors:
‚îú‚îÄ‚îÄ Primary: Purple #9013FE
‚îú‚îÄ‚îÄ Secondary: Green #7ED321
‚îú‚îÄ‚îÄ Accent: Orange #F5A623
‚îî‚îÄ‚îÄ Fun: Gold #F8E71C

Admin Colors:
‚îú‚îÄ‚îÄ Primary: Dark Blue #1A237E
‚îú‚îÄ‚îÄ Secondary: Red #D32F2F
‚îú‚îÄ‚îÄ Accent: Green #388E3C
‚îî‚îÄ‚îÄ Neutral: Gray #424242
```

---

## üë®‚Äçüè´ Teacher Summary

### Menu: ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠ | ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô | ‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô | ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô | ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏≠‡∏ô | ‡πÅ‡∏ä‡∏ó

**6 Core Functions:**

```
1. ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠ (Attendance)
   - ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏•‡∏≤‡∏™ ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠ ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ô‡∏Ç‡∏≤‡∏î
   - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏∞‡∏ö‡∏ö ‚Üí ‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
   - ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥

2. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô (Teaching Log)
   - Step-by-step: ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ ‚Üí ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° ‚Üí ‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô ‚Üí ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏´‡∏ô‡πâ‡∏≤
   - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏∞‡∏ö‡∏ö ‚Üí ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

3. ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô (Grading)
   - ‡πÅ‡∏™‡∏î‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à
   - ‡∏î‡∏π‡∏á‡∏≤‡∏ô ‚Üí ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‚Üí Feedback
   - ‡πÅ‡∏à‡πâ‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

4. ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
   - ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏•‡∏≤‡∏™ ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
   - ‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤

5. ‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏≠‡∏ô
   - ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
   - ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏•‡∏≤‡∏™

6. ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á
   - ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏∂‡∏á‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á
```

**üëâ [‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: flows-teacher.md](flows-teacher.md)**

---

## üë®‚Äçüë©‚Äçüëß Parent Summary

### Menu: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å | ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô | ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô | ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô | ‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ | ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏π

**7 Core Functions:**

```
1. ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å
   - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
   - ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (2+ ‡∏Ñ‡∏≠‡∏£‡πå‡∏™)
   - ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

2. ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô (‡∏û‡∏£‡πâ‡∏≠‡∏° OCR)
   - ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡πá‡∏Ñ‡πÄ‡∏Å‡∏à
   - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£
   - Upload ‡∏™‡∏•‡∏¥‡∏õ ‚Üí OCR ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
   - Admin approve ‚Üí Generate receipt PDF
   - ‡∏™‡πà‡∏á LINE + Email

3. ‡∏î‡∏π‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
   - ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤ ‚Üí ‡∏î‡∏π‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
   - ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡∏£‡∏π
   - ‡∏Å‡∏£‡∏≤‡∏ü‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤

4. ‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
   - ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ
   - ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô, ‡∏Ç‡∏≠‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Ñ‡∏≤‡∏ö

5. ‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠
   - Course-based: ‡∏Ñ‡∏≤‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
   - Hour-based: ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠
   - ‡∏Ñ‡∏≤‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ

6. ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏π
   - ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏£‡∏π ‚Üí ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°

7. ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à
   - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
   - Download PDF, ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•
```

**üëâ [‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: flows-parent.md](flows-parent.md)**

---

## üë∂ Student Summary

### Menu: ‡∏ï‡∏≤‡∏£‡∏≤‡∏á | ‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô | ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô | ‡πÄ‡∏Å‡∏° | ‡∏Ñ‡∏£‡∏π | ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•

**6 Core Functions:**

```
1. ‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
   - ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ
   - ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏≤‡∏ö

2. ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô
   - ‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏á
   - Upload ‡∏£‡∏π‡∏õ‡∏á‡∏≤‡∏ô ‚Üí ‡∏™‡πà‡∏á
   - ‡∏£‡∏≠‡∏Ñ‡∏£‡∏π‡∏ï‡∏£‡∏ß‡∏à ‚Üí ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô

3. ‡∏î‡∏π‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
   - ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
   - ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢
   - ‡∏Å‡∏£‡∏≤‡∏ü‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤
   - ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á

4. ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏° (Gamification)
   - ‡πÄ‡∏Å‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ
   - ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πâ‡∏°
   - Leaderboard

5. ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏π
   - ‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
   - ‡∏Ç‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠

6. ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• (Rewards)
   - ‡∏î‡∏π‡πÅ‡∏ï‡πâ‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ
   - ‡πÅ‡∏•‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
   - Badges ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ
```

**üëâ [‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: flows-student.md](flows-student.md)**

---

## üè¢ Admin Summary

### Access: Web Dashboard + MCP Server (Claude Desktop)

**7 Core Functions:**

```
1. Dashboard Overview
   - ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
   - ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ, ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢, ‡∏Å‡∏≥‡πÑ‡∏£
   - ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

2. Payment Approval
   - ‡∏î‡∏π‡∏™‡∏•‡∏¥‡∏õ‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö OCR
   - ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥/‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò
   - Generate receipt

3. Analytics Dashboard
   - ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ (‡∏Å‡∏£‡∏≤‡∏ü)
   - ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
   - ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Ñ‡∏£‡∏π

4. Expense Tracking
   - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢
   - ‡∏à‡∏±‡∏î‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
   - ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô

5. Broadcast Management
   - ‡∏™‡πà‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®
   - ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
   - ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡πà‡∏á

6. Generate Reports
   - ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô
   - ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
   - Export PDF/Excel

7. MCP Server (via Claude Desktop)
   - ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞
   - ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏ú‡πà‡∏≤‡∏ô Claude
```

**üëâ [‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: flows-admin.md](flows-admin.md)**

---

## üîÑ Common Patterns

### Role Detection

```
User ‡πÄ‡∏õ‡∏¥‡∏î LINE OA
    ‚Üì
System: Query em_users WHERE line_user_id = 'Uxxxxx'
    ‚Üì
Get role (teacher/parent/student/admin)
    ‚Üì
Display appropriate Rich Menu
```

### Message Flow

```
User: Send message/Click button
    ‚Üì
LINE Platform ‚Üí Cloudflare Worker
    ‚Üì
Verify signature ‚Üí Forward to FastAPI
    ‚Üì
Detect role ‚Üí Route to handler
    ‚Üì
Process request ‚Üí Query database
    ‚Üì
Generate response (Text/Flex Message)
    ‚Üì
Send via LINE Messaging API
    ‚Üì
User receives response
```

### Data Update Pattern

```
User performs action
    ‚Üì
Update database (em_* tables)
    ‚Üì
Trigger related actions:
    - Notify related users
    - Update statistics
    - Log activity
    ‚Üì
Send confirmation to user
```

---

## üí¨ Interaction Guidelines

### Conversational Style

```
‚úì Natural Thai language
‚úì Friendly and professional
‚úì Clear instructions
‚úì Use emojis appropriately (not too much)
‚úì Step-by-step for complex tasks
‚úì Always confirm before important actions
```

### Response Format

```
Simple Info:
‚Üí Text message (concise)

Complex Data:
‚Üí Flex Message (structured, visual)

Lists:
‚Üí Numbered + Quick Reply buttons

Forms:
‚Üí Step-by-step conversational
```

### Quick Reply Usage

```
Use Quick Reply for:
‚úì Yes/No questions
‚úì Multiple choice (3-10 options)
‚úì Common actions
‚úì Navigation shortcuts

Don't use for:
‚úó More than 13 options
‚úó Free-form input needed
‚úó Complex choices
```

### Flex Message Usage

```
Use Flex Message for:
‚úì Receipts (structured data)
‚úì Timetables (calendar view)
‚úì Progress reports (visual)
‚úì Rich content (images + text)

Template Types:
- Bubble (single card)
- Carousel (multiple cards)
- Receipt (payment summary)
- Calendar (schedule view)
```

---

## üé® UX Best Practices

### Visual Hierarchy

```
1. Title (Bold, large)
2. Key info (Highlighted)
3. Details (Normal)
4. Actions (Buttons at bottom)
```

### Information Density

```
Optimal:
- 3-5 key points per message
- 2-4 actions per Flex Message
- Max 10 lines of text

Avoid:
- Walls of text
- Too many options
- Nested menus > 3 levels
```

### Loading States

```
Long operations (>3 seconds):
‚Üí Send "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•..." message
‚Üí Show progress if possible
‚Üí Update when complete
```

### Error Handling

```
User-friendly messages:
‚úì "‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏Ñ‡πà‡∏∞ ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà"
‚úì "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô"

NOT:
‚úó "Error 500: Internal Server Error"
‚úó "NullPointerException at line 123"
```

---

## üìä Flow Statistics

### Complexity Analysis

```
Role        Flows    Avg Steps    DB Tables    External APIs
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Teacher     6        5-8          6            1 (LINE)
Parent      7        4-10         8            3 (LINE, OCR, Email)
Student     6        3-5          4            1 (LINE)
Admin       7        3-8          12           2 (LINE, Email)
```

### Integration Points

```
All Roles:
- LINE Messaging API (send/receive)
- PostgreSQL (data storage)
- Redis (session/cache)

Parent Specific:
- OCR API (slip recognition)
- Email API (receipt delivery)
- PDF Generator (receipts)

Admin Specific:
- MCP Server (Claude Desktop)
- Analytics Engine
- Report Generator
```

---

## üîó Related Documentation

- [Database Schema](../database/README.md) - ‡∏î‡∏π‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á
- [API Documentation](../API.md) - ‡∏î‡∏π API endpoints
- [Architecture](../ARCHITECTURE.md) - ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö

---

## üìù Notes for Developers

### Implementation Priority

```
Phase 1 (Week 13-16): Teacher + Parent Basic
- ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠
- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô
- ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å
- ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô (basic)

Phase 2 (Week 17-20): Student + Admin Basic
- ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô
- ‡∏î‡∏π‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
- Dashboard
- Payment approval

Phase 3 (Week 21-24): Advanced Features
- Gamification
- Advanced analytics
- Flex Messages
- OCR
```

### Testing Checklist

```
For each flow:
‚úì Happy path works
‚úì Error handling
‚úì Edge cases (empty data, duplicates)
‚úì Performance (response <2s)
‚úì LINE message format correct
‚úì Database transactions atomic
‚úì Notifications sent properly
```

---

**Last Updated:** 2025-10-19  
**Version:** 1.0.0